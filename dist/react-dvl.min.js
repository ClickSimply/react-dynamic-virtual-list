!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("React"));else if("function"==typeof define&&define.amd)define(["React"],t);else{var i="object"==typeof exports?t(require("React")):t(e.React);for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(window,function(e){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(t,i){t.exports=e},function(e,t,i){"use strict";var o,n=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),s=function(e){function t(t){var i=e.call(this,t)||this;return i.buffer=5,i.itemHeight=[],i.batchCounter=0,i.counter=0,i.id=Math.random(),i.reflowLayout=i.reflowLayout.bind(i),i.debounceResize=i.debounceResize.bind(i),i.calcVisible=i.calcVisible.bind(i),i.scheduleVisibleUpdate=i.scheduleVisibleUpdate.bind(i),i.rowCache=[],i.hasWin="undefined"!=typeof window,i.state={loading:!1,scrollHeight:0,topSpacer:0,batch:0,renderRange:[],columns:0},i}return n(t,e),t.prototype.componentWillMount=function(){void 0!==this.props.buffer&&(this.buffer=this.props.buffer),this.props.doUpdate&&this.props.doUpdate(this.calcVisible),this.reflowLayout(),this.hasWin&&window.addEventListener("resize",this.debounceResize)},t.prototype.componentWillUnmount=function(){this.hasWin&&window.removeEventListener("resize",this.debounceResize)},t.prototype.debounceResize=function(){this.doResize&&clearTimeout(this.doResize),this.doResize=setTimeout(this.reflowLayout,250)},t.prototype.reflowLayout=function(){var e=this;this.props.onResizeStart&&this.props.onResizeStart(),this.counter=0,setTimeout(function(){e.itemHeight=[],e.setState({loading:!0,scrollHeight:0,topSpacer:0,batch:0},function(){var t=e.props.calculateHeight;void 0!==t&&(e.props.items.forEach(function(i,o){e.itemHeight[o]="number"==typeof t?t:t(e.ref,i,o)}),e.reflowComplete())})},this.props.onResizeStart?20:0)},t.prototype.reflowComplete=function(){var e=this,t=0,i=Math.floor(this.ref.clientWidth/(this.props.gridItemWidth||100)),o=[],n=0,r=this.itemHeight.reduce(function(r,s,a){return e.props.gridItemWidth?(a%i==0&&(t=0),e.rowCache[a]=n,t=Math.max(t,e.itemHeight[a]),a%i==i-1?(o[n]=t,n++,r+t):a===e.itemHeight.length-1?(o[n]=t,r+t):r):r+s},0);this.props.gridItemWidth&&(this.itemHeight=o),this.setState({loading:!1,scrollHeight:r,columns:i,batch:0},function(){e.props.onResizeFinish&&e.props.onResizeFinish(i),e.scheduleVisibleUpdate()})},t.prototype.scheduleVisibleUpdate=function(){var e=this;this.ticking||(this.ticking=!0,window.requestAnimationFrame(function(){e.calcVisible(),e.ticking=!1}))},t.prototype.calcVisible=function(e,t){var i=e||this.ref.scrollTop,o=t||this.ref.clientHeight,n=0;if(this.props.windowContainer&&this.hasWin){var r=this.ref.getBoundingClientRect().top,s=document.documentElement,a=r+(i=(window.pageYOffset||s.scrollTop)-(s.clientTop||0));o=window.innerHeight,n+=i>a?a:i}for(var p=[],c=0;c<this.itemHeight.length;){var h=void 0!==p[0],u=void 0!==p[1];h&&u?c=this.itemHeight.length:(!h&&n>=i&&(p[0]=c),!u&&h&&n+this.itemHeight[c]>i+o&&(p[1]=c),n+=this.itemHeight[c],c++)}void 0===p[1]?p[1]=this.itemHeight.length-1:p[1]=Math.min(p[1]+this.buffer,this.itemHeight.length-1),p[0]=Math.max(0,p[0]-this.buffer);for(var l=0,d=0;d<p[0]&&this.itemHeight[d];d++)l+=this.itemHeight[d];this.setState({renderRange:p,topSpacer:l})},t.prototype.addEventListener=function(){this.ref&&!this.props.doUpdate&&this.hasWin&&(this.props.windowContainer?window.addEventListener("scroll",this.scheduleVisibleUpdate):this.ref.addEventListener("scroll",this.scheduleVisibleUpdate))},t.prototype.render=function(){var e=this,t=500*this.state.batch,i=t+500,o=0;return r.createElement("div",{className:this.props.className,style:this.props.style,ref:function(t){t&&t!==e.ref&&(e.ref=t,e.addEventListener(),e.props.ref&&e.props.ref(t))}},r.createElement("div",{style:{height:this.state.scrollHeight>0?this.state.scrollHeight-this.state.topSpacer:"unset",paddingTop:this.state.topSpacer}},this.state.loading?void 0!==this.props.calculateHeight?null:r.createElement("div",null,this.props.items.filter(function(e,o){return o>=t&&o<i}).map(function(i,n){return r.createElement("div",{key:n,ref:function(i){i&&!e.itemHeight[n+t]&&(e.counter++,o++,e.itemHeight[n+t]=i.clientHeight,e.counter===e.props.items.length?e.reflowComplete():500===o&&setTimeout(function(){e.setState({batch:e.state.batch+1})},0))}},e.props.onRender(i,n))})):this.props.items.filter(function(t,i){return e.props.gridItemWidth?e.rowCache[i]>=e.state.renderRange[0]&&e.rowCache[i]<=e.state.renderRange[1]:i>=e.state.renderRange[0]&&i<=e.state.renderRange[1]}).map(function(t,i){return e.props.onRender(t,e.state.renderRange[0]+i)})))},t}(r.PureComponent);t.DVL=s}])});