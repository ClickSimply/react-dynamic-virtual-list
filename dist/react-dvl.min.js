!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var i="object"==typeof exports?e(require("react")):e(t.react);for(var s in i)("object"==typeof exports?exports:t)[s]=i[s]}}(window,function(t){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.t?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){"use strict";var s,n=this&&this.h||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.e||Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),p={opacity:0,height:0},h={},a=function(t){function e(e){var i=t.call(this,e)||this;return i.u=5,i.f=[],i.a=[],i.v=0,i.w=0,i.g=i.g.bind(i),i._=i._.bind(i),i.b=i.b.bind(i),i.y=i.y.bind(i),i.S=i.S.bind(i),i.j=[],i.x=0,i.O="undefined"!=typeof window,i.state={M:!1,T:0,H:0,N:0,z:[],q:0,B:[],I:null},i}return n(e,t),e.prototype.componentWillMount=function(){this.u=void 0!==this.props.buffer?this.props.buffer:5,this.R=this.props.windowContainer,this.props.doUpdate&&this.props.doUpdate(this.b),this.O&&window.addEventListener("resize",this._)},e.prototype.componentDidUpdate=function(t,e,i){t.items!==this.props.items&&(this.props.cacheKey&&(h[String(this.props.cacheKey)]={}),this.g())},e.prototype.componentWillUnmount=function(){this.O&&window.removeEventListener("resize",this._),this.k&&this.k.removeEventListener("scroll",this.S)},e.prototype._=function(){var t=this;this.A&&clearTimeout(this.A),this.A=setTimeout(function(){t.props.cacheKey&&(h[String(t.props.cacheKey)]={}),t.g()},250)},e.prototype.y=function(){var t=this;if(this.props.cacheKey&&h[String(this.props.cacheKey)]&&h[String(this.props.cacheKey)][window.innerWidth])return this.a=h[String(this.props.cacheKey)][window.innerWidth].rows,this.f=h[String(this.props.cacheKey)][window.innerWidth].items,void this.setState({H:h[String(this.props.cacheKey)][window.innerWidth].height},function(){t.b()});this.w=0,this.f=[],this.a=[],setTimeout(function(){t.setState({M:!0},function(){var e=t.props.calculateHeight;void 0!==e&&(t.props.items.forEach(function(i,s){t.f[s]="number"==typeof e?e:e(t.state.I,i,s)}),t.C(!0))})},0)},e.prototype.g=function(){this.props.onResizeStart?this.props.onResizeStart(this.y):this.y()},e.prototype.C=function(t){var e=this,i=0,s=Math.floor(this.state.I.clientWidth/(this.props.gridItemWidth||100)),n=[],o=0;this.j=[];var r=this.state.T,p="number"==typeof this.props.calculateHeight;p&&(i=this.props.calculateHeight);var a=this.f.reduce(function(h,a,c){return!t&&r&&c>r-1?h:e.props.gridItemWidth?(e.j[c]=o,p||(c%s==0&&(i=0),i=Math.max(i,e.f[c])),c===e.f.length-1?(n[o]=i,h+i):c%s==s-1?(n[o]=i,o++,h+i):h):h+a},0);if(this.props.gridItemWidth?this.a=n:this.a=this.f,t)this.props.cacheKey&&(h[String(this.props.cacheKey)]||(h[String(this.props.cacheKey)]={}),h[String(this.props.cacheKey)][window.innerWidth]={rows:this.a,items:this.f,height:a}),this.setState({M:!1,q:s,T:0},function(){e.setState({H:a},function(){e.S()}),e.props.onResizeFinish&&e.props.onResizeFinish(a,s,e.f)});else{var c=Math.round(a/r),u=(this.props.items.length-r)*c;this.setState({H:a+u,q:s},function(){e.S()})}},e.prototype.D=function(t){this.O?window.requestAnimationFrame(function(){t()}):setTimeout(function(){t()},16)},e.prototype.S=function(){this.F||(this.F=!0,this.D(this.b))},e.prototype.b=function(t,e){var i=this,s=e||this.state.I.clientHeight,n=0,o=t||this.state.I.scrollTop,r=0;if(this.R&&this.O){var p=this.state.I.getBoundingClientRect().top,h=document.documentElement,a=p+(o=(window.pageYOffset||h.scrollTop)-(h.clientTop||0));if(s=window.innerHeight,(o-=a)<0&&o<-1*s)return void(this.F=!1)}for(var c=[],u=0;u<this.a.length;){var f=void 0!==c[0],l=void 0!==c[1];if(f&&l)u=this.a.length;else{if(!f&&r+this.a[u]>=o){if(c[0]=Math.max(0,u-this.u),n=r,c[0]!==u)for(var d=1,y=u-c[0];y>0&&d<=y;)n-=this.a[u-d],d++}else!l&&f&&r>o+s&&(c[1]=Math.min(u+this.u,this.a.length));r+=this.a[u],u++}}void 0===c[1]&&(c[1]=this.a.length),this.F=!1,this.setState({z:c,N:n,B:function(){if(void 0!==i.props.calculateHeight){var t=i.props.gridItemWidth?c.map(function(t){return t*i.state.q}):c;return i.props.items.slice.apply(i.props.items,t)}return i.props.items.filter(function(t,e){return!(i.state.T&&e>i.state.T-1)&&(i.props.gridItemWidth?i.j[e]>=c[0]&&i.j[e]<=c[1]:e>=c[0]&&e<=c[1])})}()})},e.prototype.G=function(){this.state.I&&!this.props.doUpdate&&this.O&&(this.R?this.k=window:this.k=this.state.I,this.k.addEventListener("scroll",this.S)),this.g()},e.prototype.render=function(){var t=this,e=this.state.T,i=this.state.T+100,s=this.props.gridItemWidth?this.state.z[0]*this.state.q:this.state.z[0];return"undefined"==typeof window?r.createElement("div",{className:this.props.containerClass,style:o({marginBottom:"10px"},this.props.containerStyle)},r.createElement("div",{className:this.props.innerContainerClass||"",style:this.props.innerContainerStyle||{}},this.props.items.map(function(e,i){return t.props.onRender(e,i,0)}))):r.createElement("div",{className:this.props.containerClass,style:o({marginBottom:"10px",boxSizing:"content-box",height:!this.state.I&&this.state.H?this.state.H:""},this.props.containerStyle),ref:function(e){e&&e!==t.state.I&&t.setState({I:e},function(){t.O&&"scroll"!==window.getComputedStyle(e).overflow&&"scroll"!==window.getComputedStyle(e).overflowY&&(t.R=!0),t.G(),t.props.containerRef&&t.props.containerRef(e)})}},this.state.I?r.createElement("div",{className:this.props.innerContainerClass||"",style:o({height:this.state.H>0?this.state.H-this.state.N:"unset",paddingTop:this.state.N},this.props.innerContainerStyle)},!this.state.M||this.state.T?this.state.B.map(function(e,i){return t.props.onRender(e,s+i,t.state.q)}):null):null,this.state.M&&void 0===this.props.calculateHeight&&this.props.items&&this.props.items.length?r.createElement("div",{style:p},this.props.items.filter(function(t,s){return s>=e&&s<i}).map(function(i,s){return t.f[e+s]?null:r.createElement("div",{key:s,ref:function(i){i&&!t.f[e+s]&&(t.f[e+s]=i.clientHeight,t.w++,t.w===t.props.items.length?t.D(function(){t.C(!0)}):t.w>0&&t.w%100==0&&t.D(function(){t.setState({T:t.w},function(){t.C(!1)})}))}},t.props.onRender(i,e+s,0))})):null)},e}(r.PureComponent);e.DVL=a}])});